{% extends "base.html" %}
{% block styles %}
	<link href="css/custom.css" rel="stylesheet">
{% endblock styles %}

{% block content %}
<div class="col-md">
	  <div class="panel panel-primary">
		<div class="panel-heading">
		  <h4 class="panel-title" style="text-align:center;line-height:10px">DANH MỤC LÝ DO</h4>
		</div>
		<div class="panel-body">
			{% if has_error %}
				<div class="panel">
					<label id="error-text" class="error">{{ has_error }}</label>
				</div>
			{% endif %}
			
			<div class="table-responsive">
				<table class="table table-bordered" id="reasontable">
					<thead>
						<tr>
							<th>STT</th>
							<th>Mã lý do</th>
							<th>Tên lý do</th>
							<th>Trạng thái</th>
							<th>Mô tả</th>
							<th>Sửa/Xóa</th>
						</tr>
					</thead>
					<tbody>
						{% for reason in reasons %}
						<tr class="odd gradeX" ondblclick="">
							<td>{{forloop.counter}}</td>
							<td><a href="/reason/{{ reason.id }}/">{{ reason.code }}</a></td>
							<td>{{ reason.name }}</td>
							<td>{% ifequal reason.status "1" %} Hiệu lực {% else %} Hết hiệu lực {% endifequal  %}</td>
							<td>{{ reason.description }}</td>
							<td class="table-action">
								<a href="/reason/{{ reason.id }}/"><i class="fa fa-pencil"></i></a>
								<a href="#" onclick="deleteReason('{{ reason.id }}');" class="delete-row confirm"><i class="fa fa-trash-o"></i></a>
								<form method="post" id="deleteReason{{ reason.id }}" action="/reason/delete/{{ reason.id }}/">
									{% csrf_token %}
								</form>
							</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
			
			<!-- table-responsive -->

		</div>
		<!-- panel-body -->
		<div class="panel-footer">
				<a class="btn btn-success" href="/reason/add/">Thêm lý do</a>
			</div>
	</div>
	<!-- panel -->
</div>
{% endblock content %}

{% block scripts %}
<script src="/js/jquery-1.10.2.min.js"></script>
<script src="/js/jquery-migrate-1.2.1.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/modernizr.min.js"></script>
<script src="/js/jquery.sparkline.min.js"></script>
<script src="/js/toggles.min.js"></script>
<script src="/js/retina.min.js"></script>
<script src="/js/jquery.cookies.js"></script>

<script src="/js/jquery.autogrow-textarea.js"></script>
<script src="/js/jquery.maskedinput.min.js"></script>
<script src="/js/chosen.jquery.min.js"></script>
<script src="/js/jquery-ui-1.10.3.min.js"></script>
<script src="/js/jquery.validate.min.js"></script>
<script src="/js/jquery.numeric.js"></script>
<script src="/js/jquery.datatables.min.js"></script>

<script src="/js/custom.js"></script>
<script>
	jQuery(document).ready(function() {
		$('#reasontable').dataTable({
			"sPaginationType" : "full_numbers"
		});
		$(".table-responsive  select").chosen({
			'min-width' : '150px',
			'white-space' : 'nowrap',
			disable_search_threshold : 10
		});
	});
	
	function deleteReason(reason_id)
	{
		$.confirm({
			text : "Bạn thực sự muốn xoá lý do",
			confirm : function(button)
			{
				jQuery('#deleteReason' + reason_id).submit();
			},
			cancel : function(button)
			{

			}
		});
	}
</script>
{% endblock scripts%}